<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Participant Journey</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            min-height: 100vh;
            color: #182d53;
            overflow-x: hidden;
            transition: background 0.6s ease;
        }

        /* Dynamic backgrounds per stage - now only 4 stages */
        body.stage-0 { background: linear-gradient(135deg, #ffffff 0%, #f0f8ff 100%); }
        body.stage-1 { background: linear-gradient(135deg, #f8fbfd 0%, #e8f4fb 100%); }
        body.stage-2 { background: linear-gradient(135deg, #182d53 0%, #2a4a7a 100%); color: #fff; }
        body.stage-3 { background: linear-gradient(135deg, #f0f8ff 0%, #d4ecf9 100%); }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header - animates with stage */
        .header {
            text-align: center;
            padding: 40px 20px 20px;
            max-width: 700px;
            margin: 0 auto;
            transition: all 0.5s ease;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: color 0.5s ease;
        }

        body.stage-2 h1 { color: #fff; }

        .subtitle {
            font-size: 1.05rem;
            line-height: 1.6;
            opacity: 0.8;
            transition: color 0.5s ease;
        }

        /* Hero container - holds stage-specific content */
        .hero-container {
            margin-bottom: 24px;
        }

        /* Stage hero areas - integrated with info panel */
        .stage-hero {
            display: none;
            padding: 0;
            animation: fadeSlideIn 0.6s ease;
        }

        .stage-hero.active {
            display: block;
        }

        @keyframes fadeSlideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Pie Chart for Recruitment */
        .hero-pie-wrapper {
            max-width: 500px;
            margin: 0 auto;
        }

        .hero-pie-label {
            text-align: center;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #7a8fa6;
            margin-bottom: 16px;
            font-weight: 600;
        }

        .pie-chart-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .pie-chart {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(
                #86c7ed 0deg 132.5deg,      /* 36.8% Referrals */
                #5fb3e0 132.5deg 241.6deg,  /* 30.3% SMS */
                #182d53 241.6deg 331.6deg,  /* 25% Digital Ads */
                #3d5a80 331.6deg 357.5deg,  /* 7.2% Partnerships */
                #7a8fa6 357.5deg 360deg     /* 0.7% Other */
            );
            box-shadow: 0 8px 30px rgba(24, 45, 83, 0.15);
            position: relative;
        }

        .pie-chart::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: #fff;
            border-radius: 50%;
        }

        .pie-legend {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.85rem;
        }

        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 3px;
            flex-shrink: 0;
        }

        .legend-color.referrals { background: #86c7ed; }
        .legend-color.sms { background: #5fb3e0; }
        .legend-color.digital { background: #182d53; }
        .legend-color.partnerships { background: #3d5a80; }
        .legend-color.other { background: #7a8fa6; }

        .legend-value {
            font-weight: 700;
            min-width: 45px;
        }

        /* Events hero - video + screenshots */
        .hero-events-wrapper {
            max-width: 100%;
            margin: 0 auto;
        }

        .hero-video-wrapper {
            max-width: 100%;
            margin: 0 auto 24px;
            position: relative;
        }

        .hero-video-label {
            text-align: center;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: rgba(255,255,255,0.8);
            margin-bottom: 12px;
            font-weight: 600;
        }

        .hero-video {
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            background: #000;
            position: relative;
        }

        .hero-video iframe {
            border-radius: 16px;
        }

        /* Screenshot wall for Events */
        .hero-palooza {
            max-width: 100%;
            overflow: hidden;
            position: relative;
            margin-top: 24px;
        }

        .screenshot-explosion {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            padding: 10px 0;
            max-width: 100%;
            margin: 0 auto;
        }

        .screenshot-item {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            animation: popIn 0.5s ease backwards;
        }

        .screenshot-item:nth-child(odd) { transform: rotate(-2deg); }
        .screenshot-item:nth-child(even) { transform: rotate(2deg); }
        .screenshot-item:nth-child(3n) { transform: rotate(-3deg) scale(1.05); }
        .screenshot-item:nth-child(5n) { transform: rotate(3deg) scale(0.95); }

        .screenshot-item:hover {
            transform: rotate(0deg) scale(1.15) !important;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .screenshot-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.5) rotate(10deg); }
            to { opacity: 1; }
        }

        .palooza-label {
            text-align: center;
            margin-top: 20px;
            font-size: 0.9rem;
            color: rgba(255,255,255,0.9);
            font-weight: 500;
        }

        /* Talk to Friends hero - GIF */
        .hero-gif-wrapper {
            max-width: 100%;
            margin: 0 auto;
        }

        .hero-gif-label {
            text-align: center;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #7a8fa6;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .hero-gif {
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(24, 45, 83, 0.15);
            background: #fff;
        }

        .hero-gif img {
            width: 100%;
            display: block;
            border-radius: 16px;
        }

        /* Journey track */
        .journey-wrapper {
            padding: 30px 20px 60px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .journey-track-container {
            position: relative;
            height: 140px;
            margin-bottom: 30px;
        }

        .journey-path {
            position: absolute;
            top: 55px;
            left: 50px;
            right: 50px;
            height: 6px;
            background: rgba(134, 199, 237, 0.3);
            border-radius: 3px;
            overflow: hidden;
        }

        .journey-path-fill {
            height: 100%;
            background: linear-gradient(90deg, #86c7ed, #5fb3e0);
            border-radius: 3px;
            transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 20px rgba(134, 199, 237, 0.6);
        }

        .stage-markers {
            position: absolute;
            top: 25px;
            left: 50px;
            right: 50px;
            display: flex;
            justify-content: space-between;
        }

        .stage-marker {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            z-index: 5;
        }

        .stage-marker:hover {
            transform: translateY(-5px) scale(1.1);
        }

        .marker-dot {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            background: #fff;
            border: 4px solid rgba(134, 199, 237, 0.4);
            box-shadow: 0 4px 15px rgba(24, 45, 83, 0.15);
            transition: all 0.4s ease;
        }

        .stage-marker.active .marker-dot {
            border-color: #86c7ed;
            box-shadow: 0 0 0 8px rgba(134, 199, 237, 0.2), 0 8px 30px rgba(134, 199, 237, 0.4);
            transform: scale(1.1);
        }

        .stage-marker.completed .marker-dot {
            background: linear-gradient(135deg, #86c7ed, #5fb3e0);
            border-color: #86c7ed;
        }

        .marker-label {
            margin-top: 10px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.6;
            transition: all 0.3s ease;
        }

        .stage-marker.active .marker-label {
            opacity: 1;
        }

        body.stage-2 .marker-label {
            color: #fff;
        }

        /* Animated dot instead of person */
        .journey-dot {
            position: absolute;
            top: 43px;
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #86c7ed, #182d53);
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(134, 199, 237, 0.8), 0 0 40px rgba(134, 199, 237, 0.4);
            transition: left 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 10;
            animation: dotPulse 2s ease-in-out infinite;
        }

        @keyframes dotPulse {
            0%, 100% { box-shadow: 0 0 20px rgba(134, 199, 237, 0.8), 0 0 40px rgba(134, 199, 237, 0.4); }
            50% { box-shadow: 0 0 30px rgba(134, 199, 237, 1), 0 0 60px rgba(134, 199, 237, 0.6); }
        }

        /* Info panel */
        .info-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            padding: 36px;
            box-shadow: 0 10px 50px rgba(24, 45, 83, 0.12);
            backdrop-filter: blur(10px);
            transition: all 0.5s ease;
        }

        body.stage-2 .info-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .panel-icon {
            font-size: 2.5rem;
            animation: iconBounce 2s ease-in-out infinite;
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .panel-title {
            font-size: 1.6rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        body.stage-2 .panel-title {
            color: #fff;
        }

        .panel-description {
            line-height: 1.8;
            font-size: 1.1rem;
            margin-bottom: 24px;
            opacity: 0.9;
        }

        body.stage-2 .panel-description {
            color: rgba(255,255,255,0.9);
        }

        /* Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(24, 45, 83, 0.97);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
            animation: zoomIn 0.3s ease;
        }

        @keyframes zoomIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .lightbox-content img {
            max-width: 100%;
            max-height: 85vh;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .lightbox-close {
            position: absolute;
            top: -50px;
            right: 0;
            background: none;
            border: none;
            color: #fff;
            font-size: 2.5rem;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.2s ease;
        }

        .lightbox-close:hover {
            opacity: 1;
            transform: rotate(90deg);
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.15);
            border: none;
            color: #fff;
            font-size: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .lightbox-nav:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-50%) scale(1.1);
        }

        .lightbox-prev { left: -80px; }
        .lightbox-next { right: -80px; }

        /* Expandable cards */
        .deep-dives {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 28px;
            padding-top: 24px;
            border-top: 1px solid rgba(134, 199, 237, 0.3);
        }

        .deep-dives-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.6;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .deep-dive-card {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(134, 199, 237, 0.2);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        body.stage-2 .deep-dive-card {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .deep-dive-card:hover {
            border-color: #86c7ed;
        }

        .deep-dive-card.expanded {
            background: rgba(255, 255, 255, 0.95);
            border-color: #86c7ed;
            box-shadow: 0 8px 30px rgba(134, 199, 237, 0.2);
        }

        body.stage-2 .deep-dive-card.expanded {
            background: rgba(255, 255, 255, 0.15);
        }

        .deep-dive-header {
            padding: 18px 22px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .deep-dive-title {
            font-size: 0.95rem;
            font-weight: 700;
        }

        body.stage-2 .deep-dive-title {
            color: #fff;
        }

        .deep-dive-preview {
            font-size: 0.8rem;
            opacity: 0.6;
            margin-top: 4px;
        }

        .deep-dive-card.expanded .deep-dive-preview {
            display: none;
        }

        .deep-dive-toggle {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.5;
            transition: all 0.3s ease;
            font-size: 1.3rem;
        }

        .deep-dive-card.expanded .deep-dive-toggle {
            transform: rotate(180deg);
            opacity: 1;
            color: #86c7ed;
        }

        .deep-dive-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }

        .deep-dive-card.expanded .deep-dive-content {
            max-height: 600px;
            padding: 0 22px 22px;
        }

        .deep-dive-content-inner {
            line-height: 1.7;
            font-size: 0.9rem;
            opacity: 0.85;
        }

        body.stage-2 .deep-dive-content-inner {
            color: #fff;
        }

        .deep-dive-content-inner p {
            margin-bottom: 12px;
        }

        .card-stat {
            display: flex;
            align-items: baseline;
            gap: 12px;
            margin: 16px 0;
            padding: 16px 20px;
            background: linear-gradient(135deg, rgba(134, 199, 237, 0.15), rgba(134, 199, 237, 0.05));
            border-radius: 12px;
            border-left: 4px solid #86c7ed;
        }

        .card-stat-value {
            font-size: 1.6rem;
            font-weight: 800;
            color: #182d53;
            white-space: nowrap;
        }

        body.stage-2 .card-stat-value {
            color: #fff;
        }

        .card-stat-label {
            font-size: 0.85rem;
            opacity: 0.8;
            line-height: 1.4;
        }

        /* Flow steps for Talk to Friends */
        .flow-steps {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }

        .flow-step {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 14px 18px;
            background: rgba(134, 199, 237, 0.1);
            border-radius: 12px;
            border-left: 3px solid #86c7ed;
        }

        .flow-step-number {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #86c7ed, #5fb3e0);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: #182d53;
            flex-shrink: 0;
        }

        .flow-step-text {
            font-size: 0.95rem;
            line-height: 1.4;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 36px;
        }

        .control-btn {
            padding: 14px 32px;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .control-btn.primary {
            background: linear-gradient(135deg, #86c7ed, #5fb3e0);
            color: #182d53;
            box-shadow: 0 4px 20px rgba(134, 199, 237, 0.4);
        }

        .control-btn.primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(134, 199, 237, 0.6);
        }

        .control-btn.secondary {
            background: transparent;
            color: inherit;
            border: 2px solid currentColor;
            opacity: 0.7;
        }

        .control-btn.secondary:hover {
            opacity: 1;
            transform: translateY(-2px);
        }

        /* Stats footer */
        .stats-footer {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin-top: 50px;
            padding-top: 40px;
            border-top: 1px solid rgba(134, 199, 237, 0.2);
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: #182d53;
        }

        body.stage-2 .stat-value {
            color: #fff;
        }

        .stat-label {
            font-size: 0.75rem;
            opacity: 0.6;
            margin-top: 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        /* Learn More Section */
        .learn-more-section {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px 60px;
        }

        .learn-more-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .learn-more-title {
            font-size: 1.4rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #182d53;
            margin-bottom: 8px;
        }

        .learn-more-subtitle {
            font-size: 0.95rem;
            opacity: 0.7;
        }

        .learn-more-cards {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .learn-more-card {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(134, 199, 237, 0.2);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .learn-more-card:hover {
            border-color: #86c7ed;
        }

        .learn-more-card.expanded {
            background: #fff;
            border-color: #86c7ed;
            box-shadow: 0 8px 30px rgba(134, 199, 237, 0.15);
        }

        .learn-more-card-header {
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .learn-more-card-icon {
            font-size: 1.8rem;
            margin-right: 16px;
        }

        .learn-more-card-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #182d53;
        }

        .learn-more-card-preview {
            font-size: 0.85rem;
            opacity: 0.6;
            margin-top: 4px;
        }

        .learn-more-card.expanded .learn-more-card-preview {
            display: none;
        }

        .learn-more-card-toggle {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.5;
            transition: all 0.3s ease;
            font-size: 1.4rem;
        }

        .learn-more-card.expanded .learn-more-card-toggle {
            transform: rotate(180deg);
            opacity: 1;
            color: #86c7ed;
        }

        .learn-more-card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }

        .learn-more-card.expanded .learn-more-card-content {
            max-height: 500px;
            padding: 0 24px 24px;
        }

        .learn-more-card-content-inner {
            line-height: 1.7;
            font-size: 0.95rem;
            color: #182d53;
        }

        .learn-more-card-content-inner p {
            margin-bottom: 12px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .pie-chart-container {
                flex-direction: column;
            }
            .screenshot-item {
                width: 100px;
                height: 100px;
            }
            h1 { font-size: 1.8rem; }
            .marker-dot { width: 48px; height: 48px; font-size: 1.3rem; }
        }

        @media (max-width: 600px) {
            .marker-label { display: none; }
            .stats-footer { gap: 30px; }
            .lightbox-nav { display: none; }
            .screenshot-item { width: 80px; height: 80px; }
        }
    </style>
</head>
<body class="stage-0">
    <div class="header">
        <h1>The Participant Journey</h1>
        <p class="subtitle">Follow one person through our program ‚Äî click any stage to explore, or hit play to watch the full journey unfold.</p>
    </div>

    <div class="journey-wrapper">
        <div class="journey-track-container">
            <div class="journey-path">
                <div class="journey-path-fill" id="pathFill" style="width: 0%"></div>
            </div>

            <div class="stage-markers">
                <div class="stage-marker active" data-stage="0">
                    <div class="marker-dot">üëã</div>
                    <div class="marker-label">Recruitment</div>
                </div>
                <div class="stage-marker" data-stage="1">
                    <div class="marker-dot">üìù</div>
                    <div class="marker-label">Application</div>
                </div>
                <div class="stage-marker" data-stage="2">
                    <div class="marker-dot">üéâ</div>
                    <div class="marker-label">Events</div>
                </div>
                <div class="stage-marker" data-stage="3">
                    <div class="marker-dot">üí¨</div>
                    <div class="marker-label">Talk to Friends</div>
                </div>
            </div>

            <div class="journey-dot" id="journeyDot"></div>
        </div>

        <!-- Stage-specific hero sections -->
        <div class="hero-container">
            <!-- Recruitment hero - Pie chart -->
            <div class="stage-hero" id="hero-recruitment">
                <div class="hero-pie-wrapper">
                    <div class="hero-pie-label">2024 Recruitment Channels</div>
                    <div class="pie-chart-container">
                        <div class="pie-chart"></div>
                        <div class="pie-legend">
                            <div class="legend-item">
                                <div class="legend-color referrals"></div>
                                <span class="legend-value">36.8%</span>
                                <span>Referrals</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color sms"></div>
                                <span class="legend-value">30.3%</span>
                                <span>SMS</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color digital"></div>
                                <span class="legend-value">25.0%</span>
                                <span>Digital Ads</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color partnerships"></div>
                                <span class="legend-value">7.2%</span>
                                <span>Partnerships</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color other"></div>
                                <span class="legend-value">0.7%</span>
                                <span>Other</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Events hero - Video + Screenshots -->
            <div class="stage-hero" id="hero-events">
                <div class="hero-events-wrapper">
                    <div class="hero-video-wrapper">
                        <div class="hero-video-label">Watch: What's at Stake (PA 2025)</div>
                        <div class="hero-video">
                            <iframe
                                width="100%"
                                height="506"
                                src="https://www.youtube.com/embed/Yq3KO8hCWcA"
                                title="What's at Stake - PA 2025"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen
                                style="border-radius: 20px;">
                            </iframe>
                        </div>
                    </div>
                    <div class="hero-palooza">
                        <div class="screenshot-explosion" id="screenshotWall">
                            <!-- Filled by JS -->
                        </div>
                        <div class="palooza-label">Real moments from our program ‚Äî click any to explore</div>
                    </div>
                </div>
            </div>

            <!-- Talk to Friends hero - GIF -->
            <div class="stage-hero" id="hero-talk">
                <div class="hero-gif-wrapper">
                    <div class="hero-gif-label">Rally Platform Demo</div>
                    <div class="hero-gif">
                        <img src="Rally Gifs resource.gif" alt="Rally platform demonstration">
                    </div>
                </div>
            </div>
        </div>

        <div class="info-panel" id="infoPanel">
            <!-- Content injected by JS -->
        </div>

        <div class="controls">
            <button class="control-btn secondary" id="prevBtn">‚Üê Back</button>
            <button class="control-btn primary" id="playBtn">‚ñ∂ Play Journey</button>
            <button class="control-btn secondary" id="nextBtn">Next ‚Üí</button>
        </div>

        <div class="stats-footer">
            <div class="stat">
                <div class="stat-value">97,380</div>
                <div class="stat-label">Applied in 2024</div>
            </div>
            <div class="stat">
                <div class="stat-value">27,146</div>
                <div class="stat-label">Completed Program</div>
            </div>
            <div class="stat">
                <div class="stat-value">1,014,902</div>
                <div class="stat-label">Voters Reached</div>
            </div>
        </div>
    </div>

    <!-- Learn More Section -->
    <div class="learn-more-section">
        <div class="learn-more-header">
            <h2 class="learn-more-title">Learn More</h2>
            <p class="learn-more-subtitle">Dive deeper into how we run the program</p>
        </div>
        <div class="learn-more-cards">
            <div class="learn-more-card" id="card-staffing">
                <div class="learn-more-card-header">
                    <div style="display: flex; align-items: center;">
                        <span class="learn-more-card-icon">üë•</span>
                        <div>
                            <div class="learn-more-card-title">Staffing</div>
                            <div class="learn-more-card-preview">90 event leads, recruited from the performing arts</div>
                        </div>
                    </div>
                    <div class="learn-more-card-toggle">‚ñæ</div>
                </div>
                <div class="learn-more-card-content">
                    <div class="learn-more-card-content-inner">
                        <p>In 2024, we hired 90 non-traditional organizers as part-time event leads ‚Äî primarily from the performing arts community.</p>
                        <p>Performers bring energy through a Zoom screen, handle last-minute changes, and connect authentically with participants. We recruited from Playbill.com and similar platforms.</p>
                        <div class="card-stat">
                            <div class="card-stat-value">1,329</div>
                            <div class="card-stat-label">total events run across 5 states in 2024</div>
                        </div>
                        <div class="card-stat">
                            <div class="card-stat-value">87,792</div>
                            <div class="card-stat-label">individual event attendances</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="learn-more-card" id="card-chase">
                <div class="learn-more-card-header">
                    <div style="display: flex; align-items: center;">
                        <span class="learn-more-card-icon">üìö</span>
                        <div>
                            <div class="learn-more-card-title">Chase & Resources</div>
                            <div class="learn-more-card-preview">Textline support 12 hours/day, state-specific resource hubs</div>
                        </div>
                    </div>
                    <div class="learn-more-card-toggle">‚ñæ</div>
                </div>
                <div class="learn-more-card-content">
                    <div class="learn-more-card-content-inner">
                        <p>Every participant gets access to a resource website tailored to their state with voting information, deadlines, digital materials to share, and tips for tough conversations.</p>
                        <div class="card-stat">
                            <div class="card-stat-value">50,000+</div>
                            <div class="card-stat-label">unique visitors to the resource site in 2024</div>
                        </div>
                        <p>Our Support team handles texts and emails from 11am-11pm ET every day. They answer questions about Rally, voting, and the program. They cheer people on. And yes ‚Äî they've called secretaries of state on behalf of participants who needed help.</p>
                    </div>
                </div>
            </div>

            <div class="learn-more-card" id="card-payment">
                <div class="learn-more-card-header">
                    <div style="display: flex; align-items: center;">
                        <span class="learn-more-card-icon">üí∞</span>
                        <div>
                            <div class="learn-more-card-title">Payment</div>
                            <div class="learn-more-card-preview">Real pay for real work ‚Äî direct deposit or prepaid card</div>
                        </div>
                    </div>
                    <div class="learn-more-card-toggle">‚ñæ</div>
                </div>
                <div class="learn-more-card-content">
                    <div class="learn-more-card-content-inner">
                        <p>Participants are compensated based on program completion:</p>
                        <p>‚Ä¢ Base payment for completing onboarding and Palooza<br>
                        ‚Ä¢ Bonuses for referrals who complete the program<br>
                        ‚Ä¢ Payment via direct deposit or prepaid card</p>
                        <p><strong>Relational organizing is real work that deserves real pay.</strong></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="closeLightbox()">√ó</button>
            <button class="lightbox-nav lightbox-prev" onclick="lightboxNav(-1)">‚Äπ</button>
            <img id="lightbox-img" src="" alt="Participant screenshot">
            <button class="lightbox-nav lightbox-next" onclick="lightboxNav(1)">‚Ä∫</button>
        </div>
    </div>

    <script>
        // All screenshots - from MS for web 2 folder
        const galleryImages = [
            'MS for web 2/backforth.png',
            'MS for web 2/111.png',
            'MS for web 2/211.png',
            "MS for web 2/what we've done.png",
            "MS for web 2/what we've done (1).png",
            "MS for web 2/what we've done (2).png",
            "MS for web 2/what we've done (3).png",
            "MS for web 2/what we've done (4).png",
            "MS for web 2/what we've done (5).png",
            "MS for web 2/what we've done (6).png",
            "MS for web 2/what we've done (7).png",
            "MS for web 2/what we've done (8).png",
            "MS for web 2/what we've done (9).png",
            "MS for web 2/what we've done (10).png",
            "MS for web 2/what we've done (11).png",
            "MS for web 2/what we've done (12).png",
            "MS for web 2/what we've done (13).png",
            "MS for web 2/what we've done (14).png",
            "MS for web 2/what we've done (15).png"
        ];

        let currentLightboxIndex = 0;

        function generateScreenshotWall() {
            const wall = document.getElementById('screenshotWall');
            if (!wall) return;
            wall.innerHTML = '';

            const shuffled = [...galleryImages].sort(() => Math.random() - 0.5);

            shuffled.forEach((src, i) => {
                const div = document.createElement('div');
                div.className = 'screenshot-item';
                div.style.animationDelay = `${i * 0.05}s`;

                const img = document.createElement('img');
                img.src = src;
                img.alt = 'Participant message';
                img.loading = 'lazy';
                img.onerror = () => div.style.display = 'none';

                div.appendChild(img);
                div.onclick = () => openLightbox(galleryImages.indexOf(src));
                wall.appendChild(div);
            });
        }

        const stages = [
            {
                icon: 'üëã',
                title: 'Recruitment',
                description: 'Someone sees our ad, gets a text, hears from a community partner, or ‚Äî most often ‚Äî gets invited by a friend who\'s already in the program. They click through to Rally and apply.',
                heroId: 'hero-recruitment',
                deepDives: [
                    {
                        label: 'Referrals create social pressure',
                        preview: 'Participants only get paid if their referrals complete',
                        content: `
                            <p>Referral incentives work because they create accountability. Participants get the referral bonus only if <strong>both they AND their referrals complete the program</strong>.</p>
                            <p>This means participants are motivated to follow up with the people they recruit ‚Äî not just sign them up and forget about them.</p>
                            <div class="card-stat">
                                <div class="card-stat-value">28.2%</div>
                                <div class="card-stat-label">completion rate for fall referrals (vs. 17% for summer) ‚Äî accountability made the difference</div>
                            </div>
                            <p><strong>In 2026:</strong> Participants will have visibility into their referrals' progress through Rally so they can push them to complete.</p>
                        `
                    },
                    {
                        label: 'Costs decrease in returning states',
                        preview: 'The infrastructure compounds over time',
                        content: `
                            <p>Recruitment costs drop significantly in states where we've run previous programs. Word of mouth spreads, our brand becomes known, and returning participants recruit their networks.</p>
                            <p>This is the compounding effect: every cycle builds on the last.</p>
                            <div class="card-stat">
                                <div class="card-stat-value">$25.47</div>
                                <div class="card-stat-label">cost per applicant via referrals ‚Äî our most efficient channel</div>
                            </div>
                        `
                    }
                ]
            },
            {
                icon: 'üìù',
                title: 'Application',
                description: 'Participants apply using a Rally form, selecting their onboarding time at the point of application. Behind the scenes, we verify them against the voter file, run fraud detection, and review their responses.',
                heroId: null,
                deepDives: [
                    {
                        label: 'The vetting pipeline',
                        preview: 'Voter file ‚Üí tiering ‚Üí fraud check ‚Üí human review',
                        content: `
                            <p>Every application goes through a multi-step vetting process:</p>
                            <div class="flow-steps">
                                <div class="flow-step">
                                    <div class="flow-step-number">1</div>
                                    <div class="flow-step-text"><strong>Voter file matching</strong> ‚Äî Applications matched to the national voter file (83% auto-match rate in 2024)</div>
                                </div>
                                <div class="flow-step">
                                    <div class="flow-step-number">2</div>
                                    <div class="flow-step-text"><strong>Tiering</strong> ‚Äî Assigned to hiring tiers based on vote propensity, support scores, and location</div>
                                </div>
                                <div class="flow-step">
                                    <div class="flow-step-number">3</div>
                                    <div class="flow-step-text"><strong>Fraud matrix</strong> ‚Äî Run through automated fraud detection</div>
                                </div>
                                <div class="flow-step">
                                    <div class="flow-step-number">4</div>
                                    <div class="flow-step-text"><strong>Human review</strong> ‚Äî Free responses manually reviewed before acceptance</div>
                                </div>
                            </div>
                            <div class="card-stat">
                                <div class="card-stat-value">79.4%</div>
                                <div class="card-stat-label">of applicants were accepted in 2024</div>
                            </div>
                        `
                    }
                ]
            },
            {
                icon: 'üéâ',
                title: 'Events',
                description: 'Participants attend virtual events ‚Äî first Onboarding where they learn about the program, watch a state-specific video, and sign their contract. Then Paloozas where they do live outreach to friends and family with support from our event leads.',
                heroId: 'hero-events',
                deepDives: [
                    {
                        label: 'Onboarding',
                        preview: '1 hour: welcome, video, contract, schedule Palooza',
                        content: `
                            <p>Onboarding is a 1-hour Zoom event hosted by our Mobilization Events team:</p>
                            <p>1. Staff welcome participants<br>
                            2. State-specific voter education video (20 min)<br>
                            3. Discussion: why did you become a Voting Ambassador?<br>
                            4. Sign contract in Rally<br>
                            5. Schedule Palooza event</p>
                            <div class="card-stat">
                                <div class="card-stat-value">85%+</div>
                                <div class="card-stat-label">signed their contract live on the call in 2024</div>
                            </div>
                        `
                    },
                    {
                        label: 'Palooza',
                        preview: 'Live outreach with support from event leads',
                        content: `
                            <p>Paloozas are one-hour virtual work sessions where participants do their actual outreach ‚Äî texting and calling their contacts ‚Äî with support from event leads.</p>
                            <p>If someone needs extra help, our system spots it and moves them to a breakout room for small-group coaching.</p>
                            <div class="card-stat">
                                <div class="card-stat-value">44.1</div>
                                <div class="card-stat-label">average contacts per completed participant</div>
                            </div>
                        `
                    }
                ]
            },
            {
                icon: 'üí¨',
                title: 'Talk to Friends',
                description: 'The heart of relational organizing ‚Äî participants reach out to people they actually know, help them make vote plans with personalized polling locations, and track their progress as friends move from "planning to vote" to "voted."',
                heroId: 'hero-talk',
                deepDives: [
                    {
                        label: 'The outreach flow',
                        preview: 'Add contacts ‚Üí Support ID ‚Üí Vote plan ‚Üí Track voted',
                        content: `
                            <p>Participants use Rally to manage their outreach:</p>
                            <div class="flow-steps">
                                <div class="flow-step">
                                    <div class="flow-step-number">1</div>
                                    <div class="flow-step-text"><strong>Add contacts</strong> ‚Äî Import friends and family into Rally</div>
                                </div>
                                <div class="flow-step">
                                    <div class="flow-step-number">2</div>
                                    <div class="flow-step-text"><strong>Support ID</strong> ‚Äî Have conversations to understand where contacts stand</div>
                                </div>
                                <div class="flow-step">
                                    <div class="flow-step-number">3</div>
                                    <div class="flow-step-text"><strong>Create vote plans</strong> ‚Äî Personalized plans with polling places from the iwillvote API</div>
                                </div>
                                <div class="flow-step">
                                    <div class="flow-step-number">4</div>
                                    <div class="flow-step-text"><strong>Send reminders</strong> ‚Äî Follow up as Election Day approaches</div>
                                </div>
                                <div class="flow-step">
                                    <div class="flow-step-number">5</div>
                                    <div class="flow-step-text"><strong>Track progress</strong> ‚Äî AVEV data updates nightly so participants see friends move to "voted"</div>
                                </div>
                            </div>
                            <div class="card-stat">
                                <div class="card-stat-value">84%</div>
                                <div class="card-stat-label">of contacts voted early or made a vote plan</div>
                            </div>
                        `
                    }
                ]
            }
        ];

        let currentStage = 0;
        let isPlaying = false;
        let playInterval = null;

        const journeyDot = document.getElementById('journeyDot');
        const pathFill = document.getElementById('pathFill');
        const infoPanel = document.getElementById('infoPanel');
        const markers = document.querySelectorAll('.stage-marker');
        const playBtn = document.getElementById('playBtn');

        function getDotPosition(index) {
            const marker = markers[index];
            const container = document.querySelector('.journey-track-container');
            const markerRect = marker.getBoundingClientRect();
            const containerRect = container.getBoundingClientRect();
            return markerRect.left - containerRect.left + (markerRect.width / 2) - 15;
        }

        function openLightbox(index) {
            currentLightboxIndex = index;
            const lightbox = document.getElementById('lightbox');
            const img = document.getElementById('lightbox-img');
            img.src = galleryImages[index];
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            document.body.style.overflow = '';
        }

        function lightboxNav(delta) {
            currentLightboxIndex = (currentLightboxIndex + delta + galleryImages.length) % galleryImages.length;
            document.getElementById('lightbox-img').src = galleryImages[currentLightboxIndex];
        }

        document.getElementById('lightbox').addEventListener('click', (e) => {
            if (e.target.id === 'lightbox') closeLightbox();
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeLightbox();
            if (document.getElementById('lightbox').classList.contains('active')) {
                if (e.key === 'ArrowLeft') lightboxNav(-1);
                if (e.key === 'ArrowRight') lightboxNav(1);
            }
        });

        function updateStage(newStage, animate = true) {
            currentStage = newStage;
            const stage = stages[currentStage];

            // Update body class for dynamic background
            document.body.className = `stage-${currentStage}`;

            // Update hero sections
            document.querySelectorAll('.stage-hero').forEach(hero => hero.classList.remove('active'));
            if (stage.heroId) {
                const hero = document.getElementById(stage.heroId);
                if (hero) hero.classList.add('active');
            }

            // Update journey dot position
            journeyDot.style.left = getDotPosition(currentStage) + 'px';

            // Update path fill
            pathFill.style.width = `${(currentStage / (stages.length - 1)) * 100}%`;

            // Update markers
            markers.forEach((marker, index) => {
                marker.classList.remove('active', 'completed');
                if (index < currentStage) marker.classList.add('completed');
                else if (index === currentStage) marker.classList.add('active');
            });

            // Build info panel
            let deepDiveHtml = '';
            if (stage.deepDives && stage.deepDives.length > 0) {
                deepDiveHtml = `
                    <div class="deep-dives">
                        <div class="deep-dives-label">Learn more</div>
                        ${stage.deepDives.map((dd, i) => `
                            <div class="deep-dive-card" data-index="${i}">
                                <div class="deep-dive-header">
                                    <div>
                                        <div class="deep-dive-title">${dd.label}</div>
                                        <div class="deep-dive-preview">${dd.preview}</div>
                                    </div>
                                    <div class="deep-dive-toggle">‚ñæ</div>
                                </div>
                                <div class="deep-dive-content">
                                    <div class="deep-dive-content-inner">${dd.content}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            infoPanel.innerHTML = `
                <div class="panel-header">
                    <div class="panel-icon">${stage.icon}</div>
                    <div class="panel-title">${stage.title}</div>
                </div>
                <div class="panel-description">${stage.description}</div>
                ${deepDiveHtml}
            `;

            // Attach expandable card handlers
            document.querySelectorAll('.deep-dive-card').forEach(card => {
                card.querySelector('.deep-dive-header').addEventListener('click', () => {
                    const wasExpanded = card.classList.contains('expanded');
                    document.querySelectorAll('.deep-dive-card').forEach(c => c.classList.remove('expanded'));
                    if (!wasExpanded) card.classList.add('expanded');
                });
            });
        }

        function nextStage() {
            if (currentStage < stages.length - 1) updateStage(currentStage + 1);
            else if (isPlaying) stopPlaying();
        }

        function prevStage() {
            if (currentStage > 0) updateStage(currentStage - 1);
        }

        function startPlaying() {
            isPlaying = true;
            playBtn.textContent = '‚è∏ Pause';
            if (currentStage === stages.length - 1) updateStage(0);
            playInterval = setInterval(() => {
                if (currentStage < stages.length - 1) nextStage();
                else stopPlaying();
            }, 3500);
        }

        function stopPlaying() {
            isPlaying = false;
            playBtn.textContent = '‚ñ∂ Play Journey';
            if (playInterval) { clearInterval(playInterval); playInterval = null; }
        }

        document.getElementById('nextBtn').addEventListener('click', () => { stopPlaying(); nextStage(); });
        document.getElementById('prevBtn').addEventListener('click', () => { stopPlaying(); prevStage(); });
        playBtn.addEventListener('click', () => { isPlaying ? stopPlaying() : startPlaying(); });

        markers.forEach((marker, index) => {
            marker.addEventListener('click', () => { stopPlaying(); updateStage(index); });
        });

        document.addEventListener('keydown', (e) => {
            if (document.getElementById('lightbox').classList.contains('active')) return;
            if (e.key === 'ArrowRight') { stopPlaying(); nextStage(); }
            if (e.key === 'ArrowLeft') { stopPlaying(); prevStage(); }
            if (e.key === ' ') { e.preventDefault(); isPlaying ? stopPlaying() : startPlaying(); }
        });

        // Learn More cards
        document.querySelectorAll('.learn-more-card').forEach(card => {
            card.querySelector('.learn-more-card-header').addEventListener('click', () => {
                const wasExpanded = card.classList.contains('expanded');
                document.querySelectorAll('.learn-more-card').forEach(c => c.classList.remove('expanded'));
                if (!wasExpanded) card.classList.add('expanded');
            });
        });

        // Initialize
        window.addEventListener('load', () => {
            generateScreenshotWall();
            setTimeout(() => updateStage(0, false), 100);
        });

        window.addEventListener('resize', () => {
            journeyDot.style.left = getDotPosition(currentStage) + 'px';
        });
    </script>
</body>
</html>
